{% extends "base.html" %}
{% block title %}Customers List | {{ block.super }} {% endblock %}


{% block content %}

  <form method='GET' action='' class='d-flex row justify-content-center'>
    <div class='col-sm-6'>
        <div class='input-group'>
            <input class='form-control' type='text' name='q' placeholder='Search Customer' value='{{ request.GET.q }}'/>
            <span class='input-group-btn'>
                <!-- <input class='btn btn-default' type='submit' value='Search' /> -->
                <button class='btn btn-default' type='submit'>Search <i class="fa fa-search"></i></button>
            </span>
        </div>
    </div>
  </form>

  <header class=' d-flex row justify-content-center'>
    <h4>
      Customers List
    </h4>
  </header> 
  <div class="table-responsive">
    <table class="table table-striped table-sm">
      <thead>
        <tr>
          <th>Customer Name</th>
          <th>Address</th>
          <th>Contact</th>
          <th>Paid</th>
          <th>Total</th>
          <th>Edit</th>
          <th>Delete</th>
          <th title="click on the icon to add payment">Pays<i class="fas fa-dollar-sign"></i></th>
          <th>Export</th>
        </tr>
      </thead>
      
        <tbody>
          {% for customer in object_list %}
          <tr>
            <td style="font-size: 20px;">
              <a href="{% url 'store:customer_profile' customer.store.slug customer.slug %}">{{ customer.name }}</a></td>
            <td>{{ customer.address }}</td>
            <td>{{ customer.contact }}</td>
            <td>{{ customer.paid_payments }}</td>
            <td>{{ customer.payments_should_be_paid }}</td>
            <td><a href="{% url 'store:update_customer' customer.store.slug customer.slug %}">
              <i class="fa fa-edit fa-2x" aria-hidden="true"></i></a></td>
            <td><a href="{% url 'store:delete_customer' customer.store.slug customer.slug %}">
              <i class="fa fa-trash text-danger fa-2x" aria-hidden="true"></i></a></td>
            <td>
              {% if customer.paid_payments >= customer.payments_should_be_paid %}
                <a href="{% url 'store:add_customer_payment' customer.store.slug customer.slug %}">
                  <i class="fa fa-check fa-2x text-success" aria-hidden="true"></i></a>
              {% else %}
                <a href="{% url 'store:add_customer_payment' customer.store.slug customer.slug %}">
                  <i class="fa fa-cross text-danger fa-2x" aria-hidden="true"></i></a>
              {% endif %}
            </td>
            <td><a href="{% url 'store:add_export' customer.store.slug customer.slug %}"><i class="fas fa-upload text-secondary fa-2x"></i></a></td>
          </tr>
          {% endfor %}
        </tbody>
      
    </table>
  </div>


{% endblock content %}
